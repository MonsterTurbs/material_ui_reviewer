<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Study Notes: Non-Blocking Google Fonts</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f0f0f0;
    }
    .card {
      background: #ffffff;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      width: 100%;
      box-sizing: border-box;
    }
    h2 {
      font-size: 1.4rem;
      margin-top: 0;
      margin-bottom: 8px;
    }
    p {
      font-size: 1rem;
      margin: 6px 0;
      line-height: 1.4;
    }
    code {
      background: #f5f5f5;
      padding: 2px 4px;
      border-radius: 4px;
      font-family: Consolas, monospace;
    }
  </style>
</head>
<body>

  <div class="card">
    <h2>ğŸš¦ The Problem: Render-Blocking Fonts</h2>
    <p>â€¢ When a page loads, links to Google Fonts in &lt;head&gt; block rendering until fonts arrive â³</p>
    <p>â€¢ Slow connections mean users stare at a blank page or fallback text ğŸ˜•</p>
    <p>â€¢ PageSpeed Insights flags <em>â€œeliminate render blocking resourcesâ€</em> for Google Fonts ğŸ“Š</p>
  </div>

  <div class="card">
    <h2>âš™ï¸ Solution: Font Face Observer</h2>
    <p>â€¢ Use the <code>fontfaceobserver</code> library to load fonts asynchronously ğŸ‰</p>
    <p>â€¢ First, include your Google Fonts link only in a JS file, not in &lt;head&gt; ğŸ’»</p>
    <p>â€¢ Then observe and load fonts in code, adding them to the document after initial render ğŸ‘Œ</p>
  </div>

  <div class="card">
    <h2>ğŸ“¦ Installing</h2>
    <p>Run:</p>
    <pre><code>npm install fontfaceobserver</code></pre>
  </div>

  <div class="card">
    <h2>ğŸ—‚ Setting Up <code>fonts.js</code></h2>
    <p>Create <code>src/ui/fonts.js</code> with:</p>
    <pre><code>import FontFaceObserver from 'fontfaceobserver';

// Create &lt;link&gt; for Google Fonts
const link = document.createElement('link');
link.rel = 'stylesheet';
link.href = 'https://fonts.googleapis.com/css?family=Pacifico|Roboto:300,400,500,700&display=swap';
document.head.appendChild(link);

// Observe each font
const roboto = new FontFaceObserver('Roboto');
const pacifico = new FontFaceObserver('Pacifico');

export default function loadFonts() {
  roboto.load();
  pacifico.load();
}</code></pre>
  </div>

  <div class="card">
    <h2>ğŸ”Œ Hooking Into Next.js</h2>
    <p>In <code>pages/_app.js</code>, import and call after mount:</p>
    <pre><code>import loadFonts from '@/ui/fonts';

function MyApp({ Component, pageProps }) {
  React.useEffect(() => {
    loadFonts(); // start loading fonts non-blocking
  }, []);

  return &lt;Component {...pageProps} /&gt;;
}

export default MyApp;</code></pre>
  </div>

  <div class="card">
    <h2>ğŸš€ What It Does</h2>
    <p>1. Page renders immediately with system fonts ğŸ”¥</p>
    <p>2. <code>loadFonts()</code> appends the Google Fonts &lt;link&gt; dynamically ğŸ“¨</p>
    <p>3. Observers fetch and apply fonts when readyâ€”no blocking initial render ğŸ¯</p>
  </div>

  <div class="card">
    <h2>ğŸ‘ Benefits</h2>
    <p>â€¢ Faster first paint and contentful paint metrics ğŸï¸</p>
    <p>â€¢ Better PageSpeed scores on mobile &amp; desktop ğŸ“ˆ</p>
    <p>â€¢ Smooth font loading without layout jank âœ¨</p>
  </div>

  <div class="card">
    <h2>ğŸ“ Key Takeaways</h2>
    <p>â€¢ Non-blocking Google Fonts improves UX and performance ğŸ’¡</p>
    <p>â€¢ <code>fontfaceobserver</code> lets you load fonts in JS, not in &lt;head&gt; ğŸ› ï¸</p>
    <p>â€¢ Hook into <code>useEffect</code> in <code>_app.js</code> (or <code>componentDidMount</code>) ğŸš©</p>
    <p>â€¢ Always test with <a href="https://developers.google.com/speed/pagespeed/insights">PageSpeed Insights</a> ğŸ§</p>
  </div>

</body>
</html>
